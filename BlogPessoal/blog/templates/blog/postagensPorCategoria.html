{% extends 'blog/layout.html' %}

{% block body %}


<div id="atualizarPostagemCategoria" class="hide">
    <h2>Atualize sua postagem aqui:</h2>
    <form action="#" method="post">
        {% csrf_token %}
        <label>Id:</label><br>
        <input type="number" name="idAtualizarPostagem" class="jsIdPostagemA3" readonly><br>
        <label>Título:</label><br>
        <input type="text" name="tituloPostA" class="jsTituloPostagemA3"><br>
        <label>categoria:</label><br>
        <select name="categoriaPostA" class="jsCategoriaPostagemA3">
            {% for c in categorias %}
            <option value="{{c.id}}" name="categoriaPostA">{{c.nome}}</option>
            {% endfor %}
        </select>
        <br>

        <label>conteúdo:</label><br>
        <textarea name="conteudoPostA" class="jsConteudoPostagemA3"></textarea><br>
        <button type="submit">Atualizar</button>

    </form>
    <hr>
</div>
<div>

    <h2>Postagens:</h2>

    {% for p in postagens %}
    <a href="{% url 'postagemView' p.id %}">{{p.titulo}}</a>
    <p>{{p.usuario}}</p>
    <p>{{p.categoria}}</p>
    <p>{{p.dataPostagem}}</p>
    <p>{{p.conteudo}}</p>

    <p>Comentários: {{ p.p.count }}</p>
    <button class="jsBtnAtualizarCategoria" data-id="{{p.id}}" data-titulo="{{p.titulo}}"
        data-categoria="{{p.categoria.id}}" data-conteudo="{{p.conteudo}}">Editar</button>
    <form action="{% url 'remover1' p.id %}">
        <button type="submit" class="btnRemover">remover</button>
    </form>
    <hr>
    {% endfor %}
</div>


{% endblock %}