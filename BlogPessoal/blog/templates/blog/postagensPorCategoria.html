{% extends 'blog/layout.html' %}

{% block body %}


<div id="jsAtualizarPostagem" class="hide">
    <h2>Atualize sua postagem aqui:</h2>
    <form action="{% url 'atualizarPostagem' %}" method="post">
        {% csrf_token %}
        <label>Id:</label><br>
        <input type="number" name="idAtualizarPostagem" class="jsIdPostagemA" readonly><br>
        <label>Título:</label><br>
        <input type="text" name="tituloPostA" class="jsTituloPostagemA"><br>
        <label>conteúdo:</label><br>
        <textarea name="conteudoPostA" class="jsConteudoPostagemA"></textarea><br>
        <button type="submit">Atualizar</button>

    </form>
    <hr>
</div>
<div>

    <h2>Postagens:</h2>

    {% for p in postagens %}
    <a href="{% url 'postagemView' p.id %}">{{p.titulo}}</a>
    <p>{{p.usuario}}</p>
    <p>{{p.categoria}}</p>
    <p>{{p.dataPostagem}}</p>
    <p>{{p.conteudo}}</p>

    <p>Comentários: {{ p.p.count }}</p>
    <div class="btnPostagensPai">
        <form action="{% url 'likesCategoria' p.id %}" method="post">
            {% csrf_token %}
            <button type="submit" style="border:none; background-color: white;"><i class="fas fa-heart"
                    style="color:red;"></i></button>

        </form>
        <form action="{% url 'deslikeCategoria' p.id %}" method="post">
            {% csrf_token %}
            <button type="submit" style="background-color: white; border:none"><i class="fas fa-thumbs-down"
                    style="color:blue"></i></button>

        </form>
        {{p.likes.count}}

    </div>
    {% if p.usuario == request.user %}
    <button class="jsBtnAtualizar" data-id="{{p.id}}" data-titulo="{{p.titulo}}" data-categoria="{{p.categoria.id}}"
        data-conteudo="{{p.conteudo}}">Editar</button>
    {% endif %}
    <form action="{% url 'remover1' p.id %}">
        <button type="submit" class="btnRemover">remover</button>
    </form>
    <hr>
    {% endfor %}
</div>


{% endblock %}